<view wx:if="{{isAdmin}}">
  <tree
    dataTree="{{dataTree}}"
    selectKey="{{selectedCode}}"
    bind:select="handleSelect"
    isSelectLastNode="true"
    isOpenAll="true"
  ></tree>
  <mp-cells title="当前分类" >
    <mp-cell>
      <view class="view-row">
        <view wx:if="{{selectedCode==''}}" >顶级</view>
        <view wx:else>{{selectedCode}} {{selectedName}}</view>
      </view>
    </mp-cell>
  </mp-cells>
  <mp-cells title="添加分类" >
    <mp-cell >
      <view style="display: flex; flex-direction: row; width: 100%;" >
        <input style="width: 300rpx;" value="{{newName}}"  placeholder="填写分类名称" bindinput="setNewCategoryName"  />
        <checkbox-group bindchange="checkSameLevel">
          <checkbox disabled="{{selectedCode==''}}" checked="{{isSameLevel}}">同级</checkbox>
        </checkbox-group>
        <button size="mini" class="input" bind:tap="add" disabled="{{nowAdding}}" > 添 加 </button>
      </view>
    </mp-cell>
  </mp-cells>
  <mp-cells title="押金设定" >
    <view style="display:flex;justify-content: center;" >
      <input class="input" style="width: 150rpx; text-align: center;" value="{{selectedCategory.deposit}}" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" />
    </view>
  </mp-cells>
  <mp-cells title="价格设定" >
    <mp-cell>
      <view>
        <mp-tabs
        tabs="{{shops}}" 
        activeTab="{{'旗舰'}}" 
        swiperClass="weui-tabs-swiper"
        bindtabclick="onTabCLick"
        bindchange="onChange"
        activeClass="tab-bar-title__selected"   
        >

          <block wx:for="{{shops}}" wx:key="title" >
            <view class="tab-content" slot="tab-content-{{index}}"  >
              <view style="margin-left: 0rpx;"  >
                <view class="view-row">
                  <view style="width:100rpx; text-align: center;width: 120rpx;text-align: center;" >-</view>
                  <view style="text-align: center;width: 150rpx;" >门市</view>
                  <view style="text-align: center;width: 150rpx;" >预约</view>
                  <view style="text-align: center;width: 150rpx;" >会员</view>
                </view>
                <view class="view-row">
                  <view style="width:100rpx; text-align: center;width: 120rpx;text-align: left;" >平日</view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[0][0]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[0][1]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[0][2]}}" /></view>
                </view>
                <view class="view-row">
                  <view style="width:100rpx; text-align: center;width: 120rpx;text-align: left;" >周末</view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[1][0]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[1][1]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[1][2]}}" /></view>
                </view>
                <view class="view-row">
                  <view style="width:100rpx; text-align: center; width: 120rpx;text-align: left;" >节假日</view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[2][0]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[2][1]}}" /></view>
                  <view style="text-align: center;width: 150rpx;margin:1rpx" ><input class="input" disabled="{{selectedCategory == undefined || selectedCategory.children != null}}" value="{{priceArr[2][2]}}" /></view>
                </view>
              </view>
            </view>
          </block>

        </mp-tabs>
      </view>
     
      
    </mp-cell>
  </mp-cells>
  <mp-cells title="删除分类">
    <mp-cell>
      <button disabled="{{ (selectedCategory.children != undefined  && selectedCategory.children != null) || selectedCategory == undefined}}" class="input" bind:tap="metionDelete" > 删 除 </button>
    </mp-cell>
  </mp-cells>
</view>