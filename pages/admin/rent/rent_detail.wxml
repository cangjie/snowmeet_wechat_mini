<view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">订单号：</view>
    <view class="right-column">{{rentOrder.id}}</view>
    <view class="left-column">店铺：</view>
    <view class="right-column">{{rentOrder.shop}}</view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">手机：</view>
    <view class="right-column"><button bindtap="call" id="{{rentOrder.cell_number}}" class="input" size="mini" style="font-size: 9pt;width: 200rpx;height: 45rpx;"  >{{rentOrder.cell_number}}</button></view>
    <view class="left-column">姓名：</view>
    <view class="right-column">{{rentOrder.real_name}}</view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">优惠券：</view>
    <view class="right-column">无</view>
    <view class="left-column">抵押物：</view>
    <view class="right-column"  wx:if="{{rentOrder.has_guarantee_credit == 1}}" >有</view>
    <view class="right-column"  wx:else >无</view>
  </view>

  <view style="display: flex; flex-direction: row;">
    <view class="left-column">押金总计：</view>
    <view class="right-column">{{rentOrder.deposit_real_str}}</view>
    <view class="left-column">押金减免：</view>
    <view class="right-column">{{rentOrder.deposit_reduce_str}}</view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">实付押金：</view>
    <view class="right-column" style="color: red;">{{rentOrder.deposit_final_str}}</view>
    <view class="left-column">订单状态：</view>
    <view class="right-column" >
      <block wx:if="{{rentOrder.status != '未支付'}}"  >
        {{rentOrder.status}}
      </block>
      <button wx:else bindtap="gotoPay" style="width: 150rpx;height: 30rpx; font-size: 9pt;font-family: inherit; font-style: normal;margin: 0rpx;padding: 0rpx" >未支付</button>
    </view>
  </view>
  <view style="display: flex; flex-direction: row;">
    
    <view class="left-column">支付方式：</view>
    <view class="right-column" >{{rentOrder.order.payments[0].pay_method}}</view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">支付单号：</view>
    <view class="right-column">{{rentOrder.outTradeNo}}</view>
    
  </view>
  <view style="display: flex; flex-direction: row;" >
    <view class="left-column">订单时间：</view>
    <view class="right-column" style="width:400rpx" >{{rentOrder.create_date_str}}</view>
  </view>
  <view style="display: flex; flex-direction: row;" >
    <view class="left-column">支付时间：</view>
    <view class="right-column" style="width:400rpx" >{{rentOrder.paidTimeStr}}</view>
  </view>
  <view wx:if="{{rentOrder.guarantee_credit_photos_arr.length > 0}}" style="text-align: center;height: 220rpx;margin-top: 30rpx;display: flex;flex-direction: row;">
    <image id="credit_{{index}}" bindtap="showGallery" wx:for="{{rentOrder.guarantee_credit_photos_arr}}" style="width: 200rpx;height: 200rpx;" src="{{item}}" ></image>
  </view>
  <mp-gallery show="{{showCreditGallery}}" showDelete="{{false}}" imgUrls="{{rentOrder.guarantee_credit_photos_arr}}" current="{{0}}"  ></mp-gallery>
  <mp-cells title="租赁明细 {{rentOrder.details.length}}" >
    <mp-cell wx:for="{{rentOrder.details}}" style="margin-left: 0rpx;">
      <view style="display: flex; flex-direction: row;">
        <view class="left-column" >编号：</view>
        <view wx:if="{{item.isEdit && item.editType != '暂存' }}" class="right-column" style="display: flex; flex-direction: row;"  >
          <input id="code_{{index}}" style="width: 200rpx;" value="{{item.rent_item_code}}" bindinput="setTextValue" class="input" type="text" /> 
          
        </view>
        <view wx:else class="right-column"  >{{item.rent_item_code}}</view>
        <view class="left-column" >名称：</view>
        <view wx:if="{{item.isEdit && item.editType != '暂存'}}"  class="right-column"  >
          <input style="width: 200rpx;" value="{{item.rent_item_name}}" id="name_{{index}}"  bindinput="setTextValue" type="text" class="input" />
        </view>
        <view wx:else class="right-column"  >{{item.rent_item_name}}</view>
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column">分类：</view>
        <view wx:if="{{item.isEdit && item.editType != '暂存'}}" class="right-column" >
          <picker mode="selector" range="{{classList}}" bindchange="selectClass"  id="{{index}}" class="input" style="width: 100rpx">
            <picker-view style="font-size: 9pt" >{{classList[item.classIndex]}}</picker-view>
          </picker>
        </view>
        <view wx:else class="right-column">{{item.rent_item_class}}</view>
        <view class="left-column">状态：</view>
        <view class="right-column">{{item.status}}</view>
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column"  >押金类型：</view>
        <view class="right-column"  >{{item.deposit_type}}</view>
        <view class="left-column"  >计划归还：</view>
        <view class="right-column" style="font-size: 9pt;"  >{{rentOrder.due_end_time_str}}</view>
        
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column">租赁单价：</view>
        <view class="right-column" wx:if="{{item.isEdit && item.editType != '暂存' }}"  >
          <input  type="digit" id="{{index}}" placeholder="{{item.unit_rental}}"  bindinput="setUnitRental" class="input"  style="width: 150rpx;" />
        </view>
        <view class="right-column" wx:else >{{item.unit_rental_str}}</view>
        <view class="left-column">租用时间：</view>
        <view class="right-column">{{item.timeLength}}</view>
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column">租金小计：</view>
        <view class="right-column">
          {{item.suggestRental_str}}
        </view>
        <view class="left-column">租金减免：</view>
        <view class="right-column">
          <input wx:if="{{(item.status == '未归还' || item.isEdit == true) && item.editType != '暂存' }}" type="digit" id="discount_{{index}}" placeholder="{{item.rental_discount}}" bindinput="setDiscount" class="input" style="width: 150rpx;" /> 
          <block wx:else>{{item.rental_discountStr}}</block>
        </view>
      </view>
      <view style="display: flex; flex-direction: row;" >
        <view class="left-column" >优惠券减免：</view>
        <view class="right-column">
          <input wx:if="{{(item.status == '未归还' || item.isEdit == true) && item.editType != '暂存' }}" type="digit" id="ticket_discount_{{index}}" placeholder="{{item.rental_ticket_discount}}" bindinput="setTicketDiscount" class="input" style="width: 150rpx;" /> 
          <block wx:else>{{item.rental_ticket_discountStr}}</block>
        </view>
        <view class="left-column">实付租金：</view>
        <view class="right-column" style="color: red;">{{item.real_rental_str}}</view>
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column">超时：</view>
        <view class="right-column">{{(item.overTime)? '是' : '否'}}</view>
        <view class="left-column">超时费：</view>
        <view class="right-column">
          <input wx:if="{{item.isEdit && item.editType != '暂存'}}" id="{{index}}" bindinput="setOvertimeCharge" class="input" style="width: 150rpx;" placeholder="{{item.overtime_charge}}" />
          <view wx:else >{{item.overtime_charge_str}}</view>
          
        </view>
      </view>
      <view style="display: flex; flex-direction: row;">
        <view class="left-column">损坏赔偿：</view>
        <view class="right-column">
          <input wx:if="{{(item.status == '未归还' || item.isEdit == true) && item.editType != '暂存' }}" type="digit" id="reparation_{{index}}" placeholder="{{item.reparation}}" bindinput="setReparation" class="input" style="width: 150rpx;" /> 
          <block wx:else>{{item.reparationStr}}</block>
        </view>
        <view class="left-column">应付总计：</view>
        <view class="right-column">{{item.paySummaryStr}}</view>
      </view>
      <view style="display: flex; flex-direction: row;" >
        <view class="left-column">已付押金：</view>
        <view class="right-column">{{item.deposit_str}}</view>
        <view class="left-column">应退金额：</view>
        <view class="right-column">{{item.refund_str}}</view>
      </view>

      <view style="display: flex; flex-direction: row;">
        <view class="left-column">发放：</view>
        <view class="right-column">
          <view wx:if="{{item.status == '已领取' || item.status == '已归还'}}" >{{item.rentStaff.real_name}}</view>
          <view wx:else >————</view>
        </view>
        <view class="left-column">归还：</view>
        <view class="right-column">
          <view wx:if="{{item.status == '已归还'}}" >{{item.returnStaff.real_name}}</view>
          <view wx:else >————</view>
        </view>
      </view>


      <view style="margin-top: 20rpx; margin-left: 50rpx;margin-right: 50rpx; margin-bottom: 20rpx;">
        <input wx:if="{{item.isEdit && item.editType != '暂存' }}" style="width: 100%;" placeholder="填写备注" id="memo_{{index}}" value="{{item.memo}}" bindinput="setMemo" class="input" style="color:red" />
        <view wx:else style="color:red" >{{item.memo}}</view>
      </view>
      <!--view wx:if="{{item.imageArr.length > 0}}" id="{{index}}" style="text-align: center;height: 220rpx;margin-top: 30rpx;display: flex;flex-direction: row;" bindtap="showDetailGallery" >
        <image id="credit_{{index}}"  wx:for="{{item.imageArr}}" style="width: 200rpx;height: 200rpx;" src="{{item}}" ></image>
      </view>
      <mp-gallery show="{{item.showGallery}}" showDelete="{{false}}" imgUrls="{{item.imageArr}}" current="{{0}}"  ></mp-gallery-->
  
      <view style="display: flex; flex-direction: row; margin-left: 0rpx; margin-right: 0rpx;padding-left: 0rpx; padding-right: 0rpx">
        <button wx:if="{{item.status == '未领取' && item.deposit_type == '预约租赁' && !item.isEdit}}" id="{{index}}" bindtap="setRentStart" style="font-size: 9pt;" size="mini"  >领取</button>
        <button  wx:if="{{(item.status == '已领取') && !item.isEdit }}" id="return_{{index}}" bindtap="setReturn"   size="mini" style="font-size: 9pt;" size="mini" >归还</button> 

        <button  wx:if="{{(item.status == '已归还') && !item.isEdit }}" id="return_{{index}}" bindtap="setUnReturn"  size="mini" style="font-size: 9pt;" size="mini" >设置为未归还</button>


        <button size="mini"  wx:if="{{item.isEdit != true}}" id="{{index}}" disabled="{{rentOrder.status=='已退款' && rentOrder.payMethod == '微信支付'}}" bindtap="setMod" style="font-size: 9pt;" >修改</button>
        <button size="mini" wx:if="{{item.isEdit == true && item.id != 0 }}" id="{{index}}" bindtap="save" style="font-size: 9pt;"  >保存</button>
        <button size="mini" wx:if="{{item.isEdit == true && item.status == '未领取' && item.deposit_type == '立即租赁'}}" id="{{index}}" bindtap="setAppend" style="font-size: 9pt;"  >确认追加</button>
        <button size="mini" wx:if="{{!item.isEdit && item.status == '未领取' && item.deposit_type == '预付押金'}}" id="{{index}}" bindtap="setInstance" style="font-size: 9pt;"  >确认租赁</button>
        <button size="mini" wx:if="{{!item.isEdit && item.status == '已领取'}}" id="reserveMore_{{index}}" bindtap="reserveMore" style="font-size: 9pt;"  >转预约</button>
        <!--button size="mini" wx:if="{{!item.isEdit && item.status == '已领取'}}" id="{{index}}" bindtap="setInstance" style="font-size: 9pt;"  >更换</button-->

        <!--button id="{{index}}" wx:if="{{item.status == '已领取' && item.isEdit}}" id="{{index}}" bindtap="change" style="width: 130rpx;font-size: 9pt;"  >更换</button-->
        <!--button size="mini" id="{{index}}" wx:if="{{item.status == '已领取' }}" id="{{index}}" bindtap="setKeep" style="width: 140rpx;font-size: 9pt;" >暂存</button>
        <button size="mini" id="{{index}}" wx:if="{{item.status == '已领取' && item.isEdit }}" id="{{index}}" bindtap="comfirmKeep" style="width: 140rpx;font-size: 9pt;" >暂存确认</button-->
      </view>
    </mp-cell>
   
  </mp-cells>
  <view style="display:flex; flex-direction: row;">
    <button bindtap="addMore" disabled="{{rentOrder.status == '已退款'}}" size="mini" >追加</button>
    <button bindtap="restore" size="mini" >取消</button>
    <button bindtap="restore" disabled="{{rentOrder.status != '未支付'}}" size="mini" bindtap="close" >关闭</button>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">实付押金：</view>
    <view class="right-column" style="color: red;">{{rentOrder.deposit_final_str}}</view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column" >租金合计：</view>
    <view class="right-column" style="color: red;" >{{totalRentalStr}}</view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">超时合计：</view>
    <view class="right-column">{{totalOvertimeChargeStr}}</view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">赔偿合计：</view>
    <view class="right-column">{{totalReparationStr}}</view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">租金减免：</view>
    <view class="right-column">
      <view wx:if="{{rentOrder.status == '已退款'}}" >{{rentalReduceStr}}</view>
      <input wx:else type="digit" placeholder="0" bindinput="setRentalReduce" placeholder="{{rentOrder.rental_reduce}}" />
    </view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">优惠券减免：</view>
    <view class="right-column">
      <view wx:if="{{rentOrder.status == '已退款'}}" >{{rentalReduceTicketStr}}</view>
      <input wx:else type="digit" placeholder="0" bindinput="setRentalReduceTicket" placeholder="{{rentOrder.rental_reduce_ticket}}" />
    </view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view style="display: flex; flex-direction: row;">
    <view class="left-column">应退金额：</view>
    <view class="right-column">{{refundAmountStr}}</view>
    <view class="left-column"></view>
    <view class="right-column"></view>
  </view>
  <view  style="margin-left: 100rpx; margin-right: 100rpx;margin-top: 50rpx;margin-bottom: 50rpx;"  >
    <input wx:if="{{rentOrder.status == '全部归还'}}" value="{{rentOrder.memo}}" bindinput="setOrderMemo" placeholder="填写订单备注" />
    <block wx:else >{{rentOrder.memo}}</block>
  </view>
  <view><button disabled="{{rentOrder.status != '全部归还'}}" bindtap="refund" > 确 认 退 款 </button></view>
</view>